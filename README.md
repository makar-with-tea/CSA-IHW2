# Макаревич Мария, БПИ228
Индивидуальное домашнее задание 1 по дисциплине "Архитектура вычислительных систем".
**Работа выполнена на 10 баллов.**
## Вариант 15. Условие:
Разработать программы на языке Ассемблера процесса RISC-V, с использованием команд арифметического сопроцессора, выполняемые в симуляторе RARS. Разработанные программы должны принимать числа в допустимом диапазоне. Например, нужно учитывать области определения и допустимых значений, если это связано с условием задачи.

Индивидуальное условие варианта: Разработать программу, вычисляющую с помощью степенного ряда с точностью не хуже 0,05% значение функции гиперболического косинуса ch(x) = (e^x + e^(−x))/2 для заданного параметра x.
## Алритм решения
Значение гиперболического косинуса находится с помощью степенного ряда Маклорена:
![image](https://github.com/makar-with-tea/CSA-IHW2/assets/79705001/fbe47573-a434-45c0-a2f5-3c41262dc8bf)

Данная формула взята из [учебника "Теория рядов" Воробьева Н. Н.](https://scask.ru/p_book_trd.php).

Отметим, что для значений, меньших или равных 113, ch(x) находится корректно, а для значений, больших или равных 114, ch(x) в результате действия программы определяется как бесконечность. Это происходит из-за ограничений формата чисел double. Однако, так как мы работаем с нецелыми числами, установить конкретную границу, после которой вычисление ch(x) становится некорректным, не представляется возможным, так как между 113 и 114 бесконечное количество нецелых чисел. Поэтому проверка вводимого пользователем числа не осуществляется, однако перед вводом этого числа на экран выводится предупреждение о том, что для чисел, больших 113 по модулю, расчет может быть произведен некорректно.
## Критерии на 4-5 баллов
- Приведено решение задачи на ассемблере. Ввод данных осуществляется с клавиатуры. Вывод данных осуществляется на дисплей.
- В программе должны присутствовать комментарии, поясняющие выполняемые действия.
- Допускается использование требуемых подпрограмм без параметров и локальных переменных.
- В отчете должно быть представлено полное тестовое покрытие. Приведены результаты тестовых прогонов. Например, с использованием скриншотов.

Реализованы ввод данных с клавиатуры и вывод данных на дисплей. Комментарии в программе присутствуют. Реализованы подпрограммы:

- next_term - подпрограмма, находящая следующий элемент степенного ряда для ch(x)
- check_accuracy - подпрограмма, проверяющая, является ли погрешность вычислений ниже допустимой по условию (0.05%)

Тесты программы присутствуют в папке [tests](tests). В конце отчета приведены скриншоты, показывающие корректную работу программы на тестах 1-4.
## Критерии на 6-7 баллов
- В программе необходимо использовать подпрограммы с передачей аргументов через параметры, что обеспечивает их повторное использование с различными входными аргументами. При нехватке регистров, используемых для передачи параметров, оставшиеся параметры передавать через стек.
- Внутри подпрограмм необходимо использовать локальные переменные. При нехватке временных регистров обеспечить сохранение данных на стеке в соответствии с соглашениями, принятыми для процессора.
- В местах вызова функции добавить комментарии, описывающие передачу фактических параметров и перенос возвращаемого результата. При этом необходимо отметить, какая переменная или результат какого выражения соответствует тому или иному фактическому параметру.

В программе реализована передача аргументов через параметры в подпрограммах next_term, check_accuracy.

- В next_term через параметры подаются значения введенного пользователем числа x, числителя и знаменателя текущего элемента степенного ряда, а также n - число, использущееся при нахождении знаменателя элемента степенного ряда.
- В check_accuracy через параметры подаются значения текущей суммы степенного ряда, допустимой погрешности и текущего элемента степенного ряда.

В обеих подпрограммах использованы локальные переменные:
- В next_term: ft0, хранящая значение x^2, и ft6, хранящее значение поля _1, равное 1.
- В check_accuracy: ft0, хранящая значение допустимой погрещности (mes_error * sum).

В местах вызова функций next_term, check_accuracy добавлены требуемые комментарии.
## Критерии на 8 баллов
- Разработанные подпрограммы должны поддерживать многократное использование с различными наборами исходных данных, включая возможность подключения различных исходных и результирующих массивов.
- Реализовать автоматизированное тестирование за счет создания дополнительной тестовой программы, осуществляющей прогон подпрограмм, осуществляющих вычисления для различных тестовых данных (вместо их ввода). Осуществить прогон тестов обеспечивающих покрытие различных ситуаций.
- Для дополнительной проверки корректности вычислений осуществить аналогичные тестовые прогоны с использованием существующих библиотек и одного из языков программирования высокого уровня по выбору: C, C++, Python.

За счет передачи аргументов через параметры подпрограммы поддерживают многократное использование, что проиллюстрировано в тестовой программе.

Отдельная тестовая программа создана: [tests.asm](code/tests.asm), в ней рассмотрены 6 вариантв входных данных, отличных от хранящихся в папке tests. Для каждого из них на экран выведено число x и полученное значение ch(x). Ниже в секции "Тесты" приведены скриншоты выполнения данной программы.

Тестовая программа на высокоуровневом языке программирования написана на языке C++: [ihw2.cpp](ihw2.cpp) . В ней подпрограммы не выделены в отдельные функции, однако алгоритм нахождения ch(x) аналогичен алгоритму, описанному в основной программе. Результаты тестов основной программы и программы ihw2.cpp совпадают.
## Критерии на 9 баллов
- Добавить в программу использование макросов для реализации ввода и вывода данных. Макросы должны поддерживать повторное использование с различными массивами и другими параметрами.
- Допускается обертыванием макросами уже разработанных подпрограмм.

В программе реализованы макросы, позволяющие считывать (read_double(%x)) и выводить (print_double(%x)) нецелые числа, а также выводить строки (print_str(%x)).
## Критерии на 10 баллов
- Программа должна быть разбита на несколько единиц компиляции. При этом подпрограммы ввода–вывода должны составлять унифицированные модули, используемые повторно как в программе, осуществляющей ввод исходных данных, так и в программе, осуществляющей тестовое покрытие.
- Макросы должны быть выделены в отдельную автономную библиотеку

Программа разбита на несколько единиц компиляции: cosh_x.asm, macroslib.s, next_term.s, check_accuracy.s. Тестирующая программа tests.asm использует те же функции, что и основная программа. Макросы выделены в отдельную библиотеку macroslib.s.
## Тесты
Корректность работы программы подтверждается прохождением 4 тестов из папки tests, а также верными результатами работы тестирующей программы на 6 других тестах из [tests.asm](code/tests.asm).

Скриншот работы программы на тестах 1-4:
![image](https://github.com/makar-with-tea/CSA-IHW2/assets/79705001/a4a2284b-1343-46e2-8be7-bc8d662fc8e3)

Скриншот работы тестирующей программы:
![image](https://github.com/makar-with-tea/CSA-IHW2/assets/79705001/3de99ce6-6ab4-45f8-a791-58f157f4d38b)
## Котики
![image](https://github.com/makar-with-tea/CSA-IHW2/assets/79705001/29dd39d3-ead6-48f8-b46d-d9b52d74ac14)

